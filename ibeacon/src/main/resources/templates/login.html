<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Material Login Form</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">

    <link rel='stylesheet prefetch'
          href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900|RobotoDraft:400,100,300,500,700,900'>
    <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css'>

    <link rel="stylesheet" href="css/style.css">

</head>

<body>


<!-- Mixins-->
<!-- Pen Title-->
<div class="pen-title">
    <h1>Material Login Form</h1><span>Pen <i class='fa fa-code'></i> by <a
        href='http://andytran.me'>Andy Tran</a></span>
</div>
<div class="rerun"><a href="">Rerun Pen</a></div>
<div class="container">
    <div class="card"></div>
    <div class="card">
        <h1 class="title">Login</h1>
        <form>
            <div class="input-container">
                <input id="loginName" required="required"/>
                <label>Username</label>
                <div class="bar"></div>
            </div>
            <div class="input-container">
                <input type="password" id="loginPassword" required="required"/>
                <label>Password</label>
                <div class="bar"></div>
            </div>
            <div class="button-container">
                <button id="loginButton" onclick="login()"><span>Go</span></button>
            </div>
            <!--<div class="footer"><a href="#">Forgot your password?</a></div>-->
        </form>
    </div>
    <div class="card alt">
        <div class="toggle"></div>
        <h1 class="title">Register
            <div class="close"></div>
        </h1>
        <form>
            <div class="input-container">
                <input id="signName" required="required"/>
                <label>Username</label>
                <div class="bar"></div>
            </div>
            <div class="input-container">
                <input id="signPassword" required="required"/>
                <label>Password</label>
                <div class="bar"></div>
            </div>
            <div class="input-container">
                <input id="againPassword" required="required"/>
                <label>Repeat Password</label>
                <div class="bar"></div>
            </div>
            <div class="button-container">
                <button onclick="sign()"><span>Next</span></button>
            </div>
        </form>
    </div>
</div>
<!-- Portfolio--><a id="portfolio" href="http://andytran.me/" title="View my portfolio!"><i class="fa fa-link"></i></a>
<!-- CodePen--><a id="codepen" href="https://codepen.io/andytran/" title="Follow me!"><i class="fa fa-codepen"></i></a>
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

<script src="js/index.js"></script>

<script>
    function login() {
        var name = document.getElementById("loginName").value;
        var password = document.getElementById("loginPassword").value;
        $.ajax({
            url: "http://localhost:8080/ibeacon/admin/login",
            type: "POST",
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify({'id': name, 'password': password}),
            dataType: "text",
            success: function (result) {
                if (result.toString() == "1") {
                    alert("登陆成功");
                    window.location.href = 'http://localhost:8080/ibeacon/home?id=' + name;
                } else {
                    alert("密码错误");
                }
            }
        });
    }

    function sign() {
        var name = document.getElementById("signName").value;
        var password = document.getElementById("signPassword").value;
        var type = 1;
        $.ajax({
            url: "http://localhost:8080/ibeacon/admin/sign",
            type: "POST",
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify({'id': name, 'password': password, 'type': type}),
            dataType: "text",
            success: function (result) {
                if (result.toString() == "1") {
                    alert("注册成功");
                    window.location.href = 'http://localhost:8080/ibeacon/home?id=' + name;
                } else {
                    alert("注册失败");
                }
            }
        });
    }
</script>

</body>

</html>
